(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{191:function(e,t,r){var n=r(470);e.exports=function(e,t){return n(e,t)}},2713:function(e,t,r){"use strict";r.d(t,"b",function(){return s}),r.d(t,"a",function(){return f}),r.d(t,"c",function(){return y});var n=r(2903),o=r(21),i=r(2716);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=.25,l={LAT_MIN:-90,LAT_MAX:90,LNG_MIN:-180,LNG_MAX:180};function p(e){var t=o.extent(e,function(e){return e[1]}),r=o.extent(e,function(e){return e[0]}),n=t[0]===t[1]?function(e){return[e[0]-a<l.LAT_MIN?l.LAT_MIN:e[0]-a,e[1]+a>l.LAT_MAX?l.LAT_MAX:e[1]+a]}(t):t,i=r[0]===r[1]?function(e){return[e[0]-a<l.LNG_MIN?l.LNG_MIN:e[0]-a,e[1]+a>l.LNG_MAX?l.LNG_MAX:e[1]+a]}(r):r;return[[i[0],n[0]],[i[1],n[1]]]}function s(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;try{var o=p(t);return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(r,!0).forEach(function(t){u(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e,{},Object(n.a)({height:e.height,width:e.width,padding:r,bounds:o}))}catch(t){return console.error("Could not auto zoom",t),e}}function f(e,t,r,n){var o,c,u=e,a=r;return u.js_tooltip&&(a=Object(i.a)(u.js_tooltip)),a&&(o=function(e){e.picked?t({content:a(e),x:e.x,y:e.y+30}):t(null)}),u.js_onclick_href?c=function(e){var t=Object(i.a)(u.js_onclick_href)(e);window.open(t)}:u.table_filter&&void 0!==n&&(c=function(e){return n(e.object[u.line_column])}),{onClick:c,onHover:o,pickable:Boolean(o)}}var b={p1:.01,p5:.05,p95:.95,p99:.99};function y(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sum",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"count"===t?function(e){return e.length}:(e=t in b?function(e,n){var i;return i=r?e.sort(function(e,t){return o.ascending(r(e),r(t))}):e.sort(o.ascending),o.quantile(i,b[t],n)}:o[t],r?function(t){return e(t.map(r))}:function(t){return e(t)})}},2716:function(e,t,r){"use strict";r.d(t,"a",function(){return f});var n=r(2745),o=r.n(n),i=r(2746),c=r.n(i),u=r(21),a=r(2717);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s={console:console,_:c.a,colors:a,d3array:u};function f(e,t,r){var n={},i="SAFE_EVAL_"+Math.floor(1e6*Math.random());n[i]={};var c=i+"="+e,u=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(r,!0).forEach(function(t){p(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},s,{},t);Object.keys(u).forEach(function(e){n[e]=u[e]});try{return o.a.runInNewContext(c,n,r),n[i]}catch(e){return function(){return e}}}},2717:function(e,t,r){"use strict";r.r(t),r.d(t,"hexToRGB",function(){return o});var n=r(100);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255;if(!e)return[0,0,0,t];var r=Object(n.f)(e);return[r.r,r.g,r.b,t]}},2721:function(e,t,r){"use strict";r.d(t,"a",function(){return m});var n=r(191),o=r.n(n),i=r(1),c=r.n(i),u=r(0),a=r.n(u),l=r(2740),p=r(2723);r(2741),r(2730);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(r,!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j=2e3,g={viewport:a.a.object.isRequired,layers:a.a.array.isRequired,setControlValue:a.a.func,mapStyle:a.a.string,mapboxApiAccessToken:a.a.string.isRequired,onViewportChange:a.a.func},m=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=h(t).call(this,e))||"object"!==s(o)&&"function"!=typeof o?d(n):o).tick=r.tick.bind(d(r)),r.onViewportChange=r.onViewportChange.bind(d(r)),r.state={previousViewport:e.viewport,timer:setInterval(r.tick,j)},r}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,c.a.Component),r=t,i=[{key:"getDerivedStateFromProps",value:function(e,t){return e.viewport!==t.viewport?{viewport:y({},e.viewport),previousViewport:t.viewport}:null}}],(n=[{key:"componentWillUnmount",value:function(){clearInterval(this.state.timer)}},{key:"onViewportChange",value:function(e){var t=Object.assign({},e),r=y({},this.state.previousViewport,{},t);this.props.onViewportChange(r)}},{key:"tick",value:function(){var e=this;if(this.state&&!o()(this.state.previousViewport,this.props.viewport)){var t=this.props.setControlValue,r=this.props.viewport;t&&t("viewport",r),this.setState(function(){return{previousViewport:e.props.viewport}})}}},{key:"layers",value:function(){return this.props.layers.some(function(e){return"function"==typeof e})?this.props.layers.map(function(e){return"function"==typeof e?e():e}):this.props.layers}},{key:"render",value:function(){var e=this.props.viewport;return c.a.createElement(l.b,f({},e,{mapStyle:this.props.mapStyle,onViewportChange:this.onViewportChange,mapboxApiAccessToken:this.props.mapboxApiAccessToken}),c.a.createElement(p.i,f({},e,{layers:this.layers(),initWebGLParameters:!0})))}}])&&O(r.prototype,n),i&&O(r,i),t}();m.propTypes=g,m.defaultProps={mapStyle:"light",onViewportChange:function(){},setControlValue:function(){}}},2726:function(e,t,r){"use strict";r.d(t,"a",function(){return b});var n=r(1),o=r.n(n),i=r(0),c=r.n(i);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f={label:c.a.string.isRequired,value:c.a.string.isRequired},b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,p(t).apply(this,arguments))}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,o.a.PureComponent),r=t,(n=[{key:"render",value:function(){return o.a.createElement("div",null,this.props.label,o.a.createElement("strong",null,this.props.value))}}])&&a(r.prototype,n),i&&a(r,i),t}();b.propTypes=f},2730:function(e,t,r){},2742:function(e,t){},2743:function(e,t){},2744:function(e,t){},2817:function(e,t,r){"use strict";r.r(t),r.d(t,"getLayer",function(){return g});var n=r(1),o=r.n(n),i=r(0),c=r.n(i),u=r(2723),a=r(2721),l=r(2717),p=r(2716),s=r(2713),f=r(2726);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(r,!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O,h={fillColor:"fillColor",color:"fillColor",fill:"fillColor","fill-color":"fillColor",strokeColor:"strokeColor","stroke-color":"strokeColor","stroke-width":"strokeWidth"},d=function(e,t){var r={};return Object.keys(e).forEach(function(t){t in h?r[h[t]]=e[t]:r[t]=e[t]}),"string"==typeof e.fillColor&&(r.fillColor=Object(l.hexToRGB)(e.fillColor)),"string"==typeof e.strokeColor&&(r.strokeColor=Object(l.hexToRGB)(e.strokeColor)),y({},r,{},t)},w=function e(t,r,n){if(t&&t.features&&t.features.forEach(function(o){e(o,r,t.extraProps||n)}),t&&t.geometry){var o=y({},t,{properties:d(t.properties,r)});o.extraProps||(o.extraProps=n),O.push(o)}};function j(e){return e.object.extraProps&&o.a.createElement("div",{className:"deckgl-tooltip"},Object.keys(e.object.extraProps).map(function(t,r){return o.a.createElement(f.a,{key:"prop-".concat(r),label:"".concat(t,": "),value:"".concat(e.object.extraProps[t])})}))}function g(e,t,r,n){var o,i=e,c=i.fill_color_picker,a=i.stroke_color_picker,l=[c.r,c.g,c.b,255*c.a],f=[a.r,a.g,a.b,255*a.a],b={};return l[3]>0&&(b.fillColor=l),f[3]>0&&(b.strokeColor=f),O=[],w(t.data,b),i.js_data_mutator&&(o=Object(p.a)(i.js_data_mutator),O=o(O)),new u.b(y({id:"geojson-layer-".concat(i.slice_id),filled:i.filled,data:O,stroked:i.stroked,extruded:i.extruded,pointRadiusScale:i.point_radius_scale},Object(s.a)(i,n,j)))}var m={formData:c.a.object.isRequired,payload:c.a.object.isRequired,setControlValue:c.a.func.isRequired,viewport:c.a.object.isRequired,onAddFilter:c.a.func,setTooltip:c.a.func};function P(e){var t=e.formData,r=e.payload,n=e.setControlValue,i=(e.onAddFilter,e.setTooltip),c=e.viewport,u=g(t,r,0,i);return o.a.createElement(a.a,{mapboxApiAccessToken:r.data.mapboxApiKey,viewport:c,layers:[u],mapStyle:t.mapbox_style,setControlValue:n})}P.propTypes=m,P.defaultProps={onAddFilter:function(){},setTooltip:function(){}},t.default=P}}]);